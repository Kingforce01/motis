(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(332)}])},332:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xe}});var s=n(5893),a=n(7294),i=n(9008),r=n(1163),o=n(381),c=n.n(o),l=n(251),d=n.n(l);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(e,t){return null==t?"":e.unix()>=t.begin&&e.unix()<t.end?"valid-day":"invalid-day"},p=function(e){var t=function(t){z.add(1,"d"),_.push((0,s.jsx)("td",{className:"out-of-month ".concat(k(t,z)).concat(h(z,e.scheduleInfo)),onClick:function(){var n=w();g(j.subtract(1,"month").date(j.daysInMonth()-n+2+t)),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone()),v(!1)},children:z.date()},"previous-month"+t.toString()))},n=function(t){z.add(1,"d"),H.push((0,s.jsx)("td",{className:"in-month ".concat(k(t,z)).concat(C(t)).concat(h(z,e.scheduleInfo)),onClick:function(){g(j.date(t)),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone()),v(!1)},children:t},t))},i=function(t){z.add(1,"d"),M.push((0,s.jsx)("td",{className:"out-of-month ".concat(k(t,z)).concat(h(z,e.scheduleInfo)),onClick:function(){g(j.add(1,"month").date(t)),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone()),v(!1)},children:t},"next-month"+t.toString()))},r=a.useRef(null),o=a.useRef(null),l=a.useRef(null),d=a.useRef(null),p=u(a.useState(!1),2),x=p[0],v=p[1],f=u(a.useState(c()()),2),j=f[0],g=f[1],N=u(a.useState(null),2),b=N[0],y=N[1];!function(e,t,n,s,i){a.useEffect((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t.current&&!t.current.contains(a.target)&&n.current&&!n.current.contains(a.target)&&s.current&&!s.current.contains(a.target)&&i(!1)};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[e])}(r,o,l,d,v),a.useEffect((function(){e.currentDate&&(g(e.currentDate),y(e.currentDate.format(e.translation.dateFormat)))}),[e.currentDate]);for(var S=e.translation.search.weekDays.map((function(e){return(0,s.jsx)("th",{className:"week-day",children:e},e.toString())})),w=function(){var e=c()(j).startOf("month").format("d");return 0==e?7:e},k=function(t,n){return c()().format(e.translation.dateFormat)===c()(n).date(t).format(e.translation.dateFormat)?"today ":""},C=function(e){return j.format("D")==e?"selected ":""},_=[],z=c()(j).utc().startOf("month").subtract(w(),"d"),T=0;T<w()-1;T++)t(T);var H=[];z=c()(j).utc().startOf("month").subtract(1,"d");for(var D=1;D<=j.daysInMonth();D++)n(D);var M=[];z=c()(j).utc().startOf("month").add(1,"M").subtract(1,"d");for(var A=1;A<=42-m(_).concat(m(H)).length;A++)i(A);var P=m(_).concat(m(H),m(M)),R=[],I=[];P.forEach((function(e,t){t%7!==0?I.push(e):(R.push(I),(I=[]).push(e)),t===P.length-1&&R.push(I)}));var F=R.map((function(e,t){return(0,s.jsx)("tr",{children:e},t)}));return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.date}),(0,s.jsxs)("div",{className:"gb-input-group",children:[(0,s.jsx)("div",{className:"gb-input-icon",children:(0,s.jsx)("i",{className:"icon",children:"event"})}),(0,s.jsx)("input",{className:"gb-input",ref:o,tabIndex:3,value:b||"",onChange:function(e){if(y(e.currentTarget.value),3==e.currentTarget.value.split(".").length){var t=u(e.currentTarget.value.split("."),3),n=t[0],s=t[1],a=t[2];if(""!==n&&!isNaN(+n)&&""!==s&&!isNaN(+s)&&""!==a&&!isNaN(+a)){var i=c()(j);i.year(a),i.month(s-1),i.date(n),g(i)}}},onKeyDown:function(t){"Enter"==t.key&&(y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone()))},onFocus:function(){return v(!0)}}),(0,s.jsx)("div",{className:"gb-input-widget",children:(0,s.jsxs)("div",{className:"day-buttons",children:[(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",ref:l,onClick:function(){g(j.subtract(1,"d")),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone())},children:(0,s.jsx)("i",{className:"icon",children:"chevron_left"})})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",ref:d,onClick:function(){g(j.add(1,"d")),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone())},children:(0,s.jsx)("i",{className:"icon",children:"chevron_right"})})})]})})]})]}),(0,s.jsxs)("div",{ref:r,className:x?"paper calendar":"paper calendar hide",children:[(0,s.jsxs)("div",{className:"month",children:[(0,s.jsx)("i",{className:"icon",onClick:function(){g(j.subtract(1,"month")),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone())},children:"chevron_left"}),(0,s.jsx)("span",{className:"month-name",children:j?e.translation.search.months[j.month()]+" "+j.year():""}),(0,s.jsx)("i",{className:"icon",onClick:function(){g(j.add(1,"month")),y(j.format(e.translation.dateFormat)),e.setCurrentDate(j.clone())},children:"chevron_right"})]}),(0,s.jsxs)("table",{className:"calendar-day",children:[(0,s.jsx)("thead",{className:"weekdays",children:(0,s.jsx)("tr",{children:S})}),(0,s.jsx)("tbody",{className:"calendardays",children:F})]})]})]})},x=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}},v=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){}},f=function(e){var t=e.filter((function(e){return e.admin_level<=8&&e.admin_level>=2}));return t[0].name+", "+t[t.length-1].name};var j=function(e){return(0,s.jsxs)("li",{className:e.listID==e.selectedSuggestion?"selected":"",title:e.station.name,onMouseDown:function(t){0==t.button&&(e.setName(e.station.name),e.setSuggestion(e.station),e.setShowSuggestions(!1),e.setSelectedSuggestion(0),x(e.localStorageStation,e.station))},onMouseOver:function(){e.setSelectedSuggestion(e.listID)},children:[(0,s.jsx)("i",{className:"icon",children:"train"}),(0,s.jsx)("span",{className:"station",children:e.station.name})]})},g=function(e){return(0,s.jsxs)("li",{className:e.listID==e.selectedSuggestion?"selected":"",title:e.address.name+", "+f(e.address.regions).split(",")[0],onMouseDown:function(){e.setName(e.address.name),e.setSuggestion(e.address),e.setShowSuggestions(!1),e.setSelectedSuggestion(0),x(e.localStorageStation,e.address)},onMouseOver:function(){e.setSelectedSuggestion(e.listID)},children:[(0,s.jsx)("i",{className:"icon",children:"place"}),(0,s.jsx)("span",{className:"address-name",children:e.address.name}),(0,s.jsx)("span",{className:"address-region",children:f(e.address.regions)})]})},N=function(e){var t,n,i,r=a.useRef(null);return t=r,n=e.inputFieldRef,i=e.setShowSuggestions,a.useEffect((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n.current&&!n.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),(0,s.jsxs)("div",{className:"proposals",ref:r,children:[e.suggestions.slice(0,6).map((function(t,n){return(0,s.jsx)(j,{station:t,listID:n,selectedSuggestion:e.highlighted,setName:e.setName,setSuggestion:e.setSuggestion,setShowSuggestions:e.setShowSuggestions,setSelectedSuggestion:e.setHighlighted,localStorageStation:e.localStorageStation},n)})),e.suggestions.slice(6).map((function(t,n){return(0,s.jsx)(g,{address:t,listID:n+6,selectedSuggestion:e.highlighted,setName:e.setName,setSuggestion:e.setSuggestion,setShowSuggestions:e.setShowSuggestions,setSelectedSuggestion:e.setHighlighted,localStorageStation:e.localStorageStation},n)}))]})};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},w=function(e){var t=a.useRef(null),n=(0,a.useState)(e.station),i=n[0],r=n[1],o=(0,a.useState)(""),c=o[0],l=o[1],d=(0,a.useState)(!1),u=d[0],m=d[1],h=(0,a.useState)([]),p=h[0],v=h[1],f=(0,a.useState)([]),j=f[0],g=f[1],w=(0,a.useState)([]),k=w[0],C=w[1],_=(0,a.useState)(!1),z=_[0],T=_[1],H=b(a.useState(0),2),D=H[0],M=H[1];return(0,a.useEffect)((function(){!function(e,t,n,s){if(""!==e){var a="https://europe.motis-project.de/?elm=StationSuggestions",i=[];fetch(a,S({destination:{type:"Module",target:"/guesser"},content_type:"StationGuesserRequest",content:{guess_count:6,input:e}})).then((function(e){return e.json()})).then((function(e){console.log("Response came in"),console.log(e),n(e.content.guesses),i=e.content.guesses})),a="https://europe.motis-project.de/?elm=AddressSuggestions",fetch(a,S({destination:{type:"Module",target:"/address"},content_type:"AddressRequest",content:{input:e}})).then((function(e){return e.json()})).then((function(e){console.log("Response came in"),console.log(e),t(e.content.guesses),s(y(i).concat(y(e.content.guesses)))}))}}(c,v,g,C)}),[u]),(0,a.useEffect)((function(){l(null==e.station?"":e.station.name),r(e.station)}),[e.station]),(0,a.useEffect)((function(){m(!u),e.setSearchDisplay(i)}),[i]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("form",{children:[(0,s.jsx)("div",{className:"label",children:e.label}),(0,s.jsxs)("div",{className:"gb-input-group",children:[(0,s.jsx)("div",{className:"gb-input-icon",children:(0,s.jsx)("i",{className:"icon",children:"place"})}),(0,s.jsx)("input",{className:"gb-input",tabIndex:1,value:c,ref:t,onChange:function(e){l(e.currentTarget.value),e.currentTarget.value.length>=3&&(m(!u),T(!0))},onKeyDown:function(t){switch(t.key){case"Enter":t.preventDefault(),l(k[D].name),r(k[D]),T(!1),M(0),x(e.localStorageStation,k[D]);break;case"Escape":t.preventDefault(),T(!1);break;case"ArrowDown":M(D+1);break;case"ArrowUp":M(D-1)}},onFocus:function(e){T(!0)},onClick:function(e){T(!0)}})]})]}),(0,s.jsx)("div",{className:"paper",style:z&&p.length>0?{}:{display:"none"},children:(0,s.jsx)(N,{addresses:p,stations:j,suggestions:k,highlighted:D,showSuggestions:z,setName:l,setSuggestion:r,setShowSuggestions:T,setHighlighted:M,localStorageStation:e.localStorageStation,inputFieldRef:t})})]})};function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=function(e){var t=(0,a.useState)(!1),n=t[0],i=t[1],r=(0,a.useState)(30),o=r[0],c=r[1],l=(0,a.useState)(void 0),d=l[0],u=l[1],m=(0,a.useState)("default"),h=m[0],p=m[1],f=(0,a.useState)(!1),j=f[0],g=f[1],N=(0,a.useState)(30),b=N[0],y=N[1],S=(0,a.useState)(void 0),w=S[0],C=S[1],_=(0,a.useState)(!1),z=_[0],T=_[1],H=(0,a.useState)(30),D=H[0],M=H[1],A=(0,a.useState)(void 0),P=A[0],R=A[1],I=(0,a.useState)(!1),F=I[0],E=I[1],O=(0,a.useState)(!1),L=O[0],B=O[1],Y=(0,a.useState)(!1),V=Y[0],W=Y[1];a.useEffect((function(){var t=v(e.localStorageModes);null!==t&&(i(t.walk.enabled),c(t.walk.search_profile.max_duration),p(t.walk.search_profile.profile),g(t.bike.enabled),y(t.bike.max_duration),T(t.car.enabled),M(t.car.max_duration),E(t.car.use_parking))}),[]),a.useEffect((function(){n&&(u({mode_type:"FootPPR",mode:{search_options:{profile:h,duration_limit:60*o}}}),W(!0))}),[o,n,h]),a.useEffect((function(){j&&(C({mode_type:"Bike",mode:{max_duration:60*b}}),W(!0))}),[b,j]),a.useEffect((function(){z&&(R(F?{mode_type:"CarParking",mode:{max_car_duration:60*D,ppr_search_options:{profile:"default",duration_limit:300}}}:{mode_type:"Car",mode:{max_duration:60*D}}),W(!0))}),[D,z,F]);return(0,s.jsxs)("div",{className:"mode-picker",children:[(0,s.jsxs)("div",{className:"mode-picker-btn",onClick:function(){return B(!0)},children:[(0,s.jsx)("div",{className:n?"mode enabled":"mode",children:(0,s.jsx)("i",{className:"icon",children:"directions_walk"})}),(0,s.jsx)("div",{className:j?"mode enabled":"mode",children:(0,s.jsx)("i",{className:"icon",children:"directions_bike"})}),(0,s.jsx)("div",{className:z?"mode enabled":"mode",children:(0,s.jsx)("i",{className:"icon",children:"directions_car"})})]}),(0,s.jsxs)("div",{className:"mode-picker-editor",style:L?{display:"flex"}:{display:"none"},children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("div",{className:"sub-overlay-close",onClick:function(){V&&(e.setModes(function(){var e=[];return n&&(e=[d]),j&&(e=k(e).concat([w])),z&&(e=k(e).concat([P])),e}()),x(e.localStorageModes,{walk:{enabled:n,search_profile:{profile:h,max_duration:o}},bike:{enabled:j,max_duration:b},car:{enabled:z,max_duration:D,use_parking:F}}),W(!1)),B(!1)},children:(0,s.jsx)("i",{className:"icon",children:"close"})}),(0,s.jsx)("div",{className:"title",children:e.title})]}),(0,s.jsxs)("div",{className:"content",children:[(0,s.jsxs)("fieldset",{className:"mode walk",children:[(0,s.jsx)("legend",{className:"mode-header",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:n,onClick:function(){i(!n),W(!0)}}),e.translation.connections.walk]})}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.searchProfile.profile}),(0,s.jsx)("div",{className:"profile-picker",children:(0,s.jsxs)("select",{onChange:function(e){return p(e.target.value)},defaultValue:h.toString(),children:[(0,s.jsx)("option",{value:"default",children:e.translation.searchProfiles.default}),(0,s.jsx)("option",{value:"accessibility1",children:e.translation.searchProfiles.accessibility1}),(0,s.jsx)("option",{value:"wheelchair",children:e.translation.searchProfiles.wheelchair}),(0,s.jsx)("option",{value:"elevation",children:e.translation.searchProfiles.elevation})]})})]}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.maxDuration}),(0,s.jsxs)("div",{className:"numeric slider control",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"30",step:"1",value:o,onChange:function(e){return c(e.currentTarget.valueAsNumber)}}),(0,s.jsx)("input",{type:"text",value:o,onChange:function(e){return c(e.currentTarget.valueAsNumber>30?30:e.currentTarget.valueAsNumber)}})]})]})]}),(0,s.jsxs)("fieldset",{className:"mode bike",children:[(0,s.jsx)("legend",{className:"mode-header",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:j,onClick:function(){g(!j),W(!0)}}),e.translation.connections.bike]})}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.maxDuration}),(0,s.jsxs)("div",{className:"numeric slider control",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"30",step:"1",value:b,onChange:function(e){return y(e.currentTarget.valueAsNumber)}}),(0,s.jsx)("input",{type:"text",value:b,onChange:function(e){return y(e.currentTarget.valueAsNumber>30?30:e.currentTarget.valueAsNumber)}})]})]})]}),(0,s.jsxs)("fieldset",{className:"mode car",children:[(0,s.jsx)("legend",{className:"mode-header",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:z,onClick:function(){T(!z),W(!0)}}),e.translation.connections.car]})}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.maxDuration}),(0,s.jsxs)("div",{className:"numeric slider control",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"30",step:"1",value:D,onChange:function(e){return M(e.currentTarget.valueAsNumber)}}),(0,s.jsx)("input",{type:"text",value:D,onChange:function(e){return M(e.currentTarget.valueAsNumber>30?30:e.currentTarget.valueAsNumber)}})]})]}),(0,s.jsx)("div",{className:"option",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:F,onClick:function(){E(!F)}}),e.translation.search.useParking]})})]})]})]})]})},_=null,z=function(e){var t=(0,a.useState)(0),n=t[0],i=t[1],r=(0,a.useState)(0),o=r[0],c=r[1],l=(0,a.useState)(0),d=l[0],u=l[1],m=(0,a.useState)(0),h=m[0],p=m[1],f=(0,a.useState)(!0),j=f[0],g=f[1];return(0,a.useEffect)((function(){window.portEvents.sub("mapShowContextMenu",(function(e){i(e.mouseX),c(e.mouseY),u(e.lat),p(e.lng),g(!1)})),window.portEvents.sub("mapCloseContextMenu",(function(e){g(!0)}))})),(0,s.jsxs)("div",{className:j?"railviz-contextmenu hidden":"railviz-contextmenu",style:{top:o+"px",left:n+"px"},children:[(0,s.jsx)("div",{className:"item",onClick:function(){g(!0),x("motis.routing.from_location",{name:d+";"+h,pos:{lat:d,lng:h},type_:"",regions:{}}),_=[!0,{name:d+";"+h,pos:{lat:d,lng:h},type_:"",regions:{}}],window.portEvents.pub("mapSetMarkers",{startPosition:{lat:d,lng:h},startName:d+";"+h,destinationPosition:v("motis.routing.to_location").pos,destinationName:v("motis.routing.to_location").name}),_=null},children:e.translation.mapContextMenu.routeFromHere}),(0,s.jsx)("div",{className:"item",onClick:function(){g(!0),x("motis.routing.to_location",{name:d+";"+h,pos:{lat:d,lng:h},type_:"",regions:{}}),_=[!1,{name:d+";"+h,pos:{lat:d,lng:h},type_:"",regions:{}}],window.portEvents.pub("mapSetMarkers",{startPosition:v("motis.routing.from_location").pos,startName:v("motis.routing.from_location").name,destinationPosition:{lat:d,lng:h},destinationName:d+";"+h}),_=null},children:e.translation.mapContextMenu.routeToHere})]})};function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function H(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var D=function(e,t,n,s,a,i,r,o,c){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({destination:{type:"Module",target:"/intermodal"},content_type:"IntermodalRoutingRequest",content:{start_type:e,start_modes:t,start:{station:n,min_connection_count:5,interval:c,extend_interval_later:!0,extend_interval_earlier:!0},search_type:s,search_dir:a,destination_type:i,destination_modes:r,destination:o}})}},M=function(e){var t=[];if(e)for(var n=0;n<e.length;n++){for(var s=[],a=0;a<e[n].stops.length;a++)s.push(e[n].stops[a].station);for(var i=[],r=0;r<e[n].trips.length;r++){for(var o=e[n].trips[r].id,c=[],l=e[n].trips[r].range.from;l<e[n].trips[r].range.to-1;l++)c.push({arrivalStation:e[n].stops[l+1].station,departureStation:e[n].stops[l].station,scheduledArrivalTime:e[n].stops[l+1].arrival.schedule_time,scheduledDepartureTime:e[n].stops[l].departure.schedule_time});i.push({sections:c,trip:o})}t.push({id:n,stations:s,trains:i,walks:[]})}return t},A=function(e,t,n){var s=[0],a=H(t),i=c().unix(t[0].stops[0].departure.schedule_time),r=[i.format("D.M.YYYY")];n(t);for(var o=1;o<t.length;o++)c().unix(t[o].stops[0].departure.schedule_time).day()!=i.day()&&(s.push(o),r.push(c().unix(t[o].stops[0].departure.schedule_time).format("D.M.YYYY")),i.add(1,"day"));s.map((function(e,t){a.splice(e+t,0,{stops:[],transports:[],trips:[],problems:[],dummyDay:r[t]})})),e(a)},P=function(e){if(!e.ok)throw Error(e.statusText);return e},R=function(e){var t=(0,a.useState)("PretripStart"),n=t[0],i=(t[1],(0,a.useState)([])),r=i[0],o=i[1],l=(0,a.useState)(v("motis.routing.from_location")),u=l[0],m=l[1],h=(0,a.useState)("InputStation"),x=h[0],f=(h[1],(0,a.useState)([])),j=f[0],g=f[1],N=(0,a.useState)(v("motis.routing.to_location")),b=N[0],y=N[1],S=(0,a.useState)(null),k=S[0],z=S[1],R=(0,a.useState)(c()().format("HH:mm")),I=R[0],F=R[1],E=(0,a.useState)("Accessibility"),O=E[0],L=(E[1],(0,a.useState)("Forward")),B=L[0],Y=L[1],V=(0,a.useState)(null),W=V[0],U=V[1],Z=(0,a.useState)(null),K=Z[0],q=Z[1],J=(0,a.useState)([]),G=J[0],X=J[1],Q=(0,a.useState)(!0),$=Q[0],ee=Q[1];return(0,a.useEffect)((function(){if(null!==u&&null!==b&&null!==K){fetch("https://europe.motis-project.de/?elm=IntermodalConnectionRequest",D(n,r,u,O,B,x,j,b,K)).then(P).then((function(e){return e.json()})).then((function(t){console.log("Response came in"),console.log(t),e.setConnections(null),A(e.setConnections,t.content.connections,X),window.portEvents.pub("mapSetMarkers",{startPosition:v("motis.routing.from_location").pos,startName:v("motis.routing.from_location").name,destinationPosition:v("motis.routing.to_location").pos,destinationName:v("motis.routing.to_location").name}),window.portEvents.pub("mapSetConnections",{mapId:"map",connections:M(t.content.connections),lowestId:0})})).catch((function(e){}))}}),[u,r,b,j,B]),(0,a.useEffect)((function(){if(null!==u&&null!==b&&null!==K&&null!==W){fetch("https://europe.motis-project.de/?elm=IntermodalConnectionRequest",D(n,r,u,O,B,x,j,b,$?W:K)).then(P).then((function(e){return e.json()})).then((function(t){console.log("Response came in"),console.log(t),$?(d()(t.content.connections[0],G[0])||(e.setConnections(null),A(e.setConnections,H(t.content.connections).concat(H(G)),X)),e.setExtendBackwardFlag(!1)):(d()(t.content.connections[t.content.connections.length-1],G[G.length-1])||(e.setConnections(null),A(e.setConnections,H(G).concat(H(t.content.connections)),X)),e.setExtendForwardFlag(!1)),window.portEvents.pub("mapSetConnections",{mapId:"map",connections:M(t.content.connections),lowestId:0})})).catch((function(e){}))}}),[K,W]),(0,a.useEffect)((function(){k&&(X([]),q({begin:k.unix(),end:k.unix()+7200}),U({begin:k.unix(),end:k.unix()+7200}),e.setDisplayDate(k))}),[k]),(0,a.useEffect)((function(){z(e.displayDate)}),[e.displayDate]),(0,a.useEffect)((function(){W&&e.extendBackwardFlag&&(U({begin:W.begin-14400,end:W.end-14400}),ee(!0))}),[e.extendBackwardFlag]),(0,a.useEffect)((function(){K&&e.extendForwardFlag&&(q({begin:K.begin+14400,end:K.end+14400}),ee(!1))}),[e.extendForwardFlag]),(0,a.useEffect)((function(){window.portEvents.sub("mapSetMarkers",(function(){_&&(_[0]?m(_[1]):y(_[1]))}))})),(0,s.jsxs)("div",{id:"search",children:[(0,s.jsxs)("div",{className:"pure-g gutters",children:[(0,s.jsxs)("div",{className:"pure-u-1 pure-u-sm-12-24 from-location",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w,{translation:e.translation,label:e.translation.search.start,station:u,setSearchDisplay:m,localStorageStation:"motis.routing.from_location"}),(0,s.jsx)(C,{translation:e.translation,title:e.translation.search.startTransports,setModes:o,localStorageModes:"motis.routing.from_modes"})]}),(0,s.jsx)("div",{className:"swap-locations-btn",children:(0,s.jsxs)("label",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",children:[(0,s.jsx)("input",{type:"checkbox",onClick:function(){var e=b;y(u),m(e)}}),(0,s.jsx)("i",{className:"icon",children:"swap_vert"})]})})]}),(0,s.jsx)("div",{className:"pure-u-1 pure-u-sm-12-24",children:(0,s.jsx)(p,{translation:e.translation,currentDate:k,setCurrentDate:z,scheduleInfo:e.scheduleInfo})})]}),(0,s.jsxs)("div",{className:"pure-g gutters",children:[(0,s.jsx)("div",{className:"pure-u-1 pure-u-sm-12-24 to-location",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(w,{translation:e.translation,label:e.translation.search.destination,station:b,setSearchDisplay:y,localStorageStation:"motis.routing.to_location"}),(0,s.jsx)(C,{translation:e.translation,title:e.translation.search.destinationTransports,setModes:g,localStorageModes:"motis.routing.to_modes"})]})}),(0,s.jsx)("div",{className:"pure-u-1 pure-u-sm-9-24",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.time}),(0,s.jsxs)("div",{className:"gb-input-group",children:[(0,s.jsx)("div",{className:"gb-input-icon",children:(0,s.jsx)("i",{className:"icon",children:"schedule"})}),(0,s.jsx)("input",{className:"gb-input",tabIndex:4,value:I,onChange:function(e){if(F(e.currentTarget.value),2==e.currentTarget.value.split(":").length){var t=T(e.currentTarget.value.split(":"),2),n=t[0],s=t[1];if(!isNaN(+n)&&!isNaN(+s)){var a=c()(k);a.hour(n>23?23:n),a.minute(s>59?59:s),z(a)}}},onKeyDown:function(e){"Enter"==e.key&&(console.log(k),F(k.format("HH:mm")))}}),(0,s.jsx)("div",{className:"gb-input-widget",children:(0,s.jsxs)("div",{className:"hour-buttons",children:[(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",onClick:function(){var e=k.clone().subtract(1,"h");z(e),F(e.format("HH:mm"))},children:(0,s.jsx)("i",{className:"icon",children:"chevron_left"})})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",onClick:function(){var e=k.clone().add(1,"h");z(e),F(e.format("HH:mm"))},children:(0,s.jsx)("i",{className:"icon",children:"chevron_right"})})})]})})]})]})}),(0,s.jsxs)("div",{className:"pure-u-1 pure-u-sm-3-24 time-option",children:[(0,s.jsxs)("form",{children:[(0,s.jsx)("input",{type:"radio",id:"search-forward",name:"time-option",value:"Forward",checked:"Forward"===B,onChange:function(){return Y("Forward")}}),(0,s.jsx)("label",{htmlFor:"search-forward",children:e.translation.search.departure})]}),(0,s.jsxs)("form",{children:[(0,s.jsx)("input",{type:"radio",id:"search-backward",name:"time-option",value:"Backward",checked:"Backward"===B,onChange:function(){return Y("Backward")}}),(0,s.jsx)("label",{htmlFor:"search-backward",children:e.translation.search.arrival})]})]})]})]})},I=n(5666),F=n.n(I),E=function(e){return"Transport"===e.move_type},O=function(e){switch(e){case 0:return"#plane";case 1:case 2:return"#train";case 3:return"#bus";case 4:case 5:case 6:return"#train";case 7:return"#sbahn";case 8:return"#ubahn";case 9:return"#tram";case 11:return"#ship";default:return"#bus"}},L=function(e,t){for(var n=[],a=0,i=e[e.length-1].move.range.to,r=0,o=0,c=0;c<e.length;c++)a=(e[c].move.range.to-e[c].move.range.from+r)/i,E(e[c])?n.push((0,s.jsxs)("g",{className:"part train-class-"+e[c].move.clasz+" acc-0",children:[(0,s.jsx)("line",{x1:o,y1:"12",x2:326*a+o,y2:"12",className:"train-line"}),(0,s.jsx)("circle",{cx:o+4,cy:"12",r:"12",className:"train-circle"}),(0,s.jsx)("use",{xlinkHref:O(e[c].move.clasz),className:"train-icon",x:o-4,y:"4",width:"16",height:"16"}),(0,s.jsx)("text",{x:o-6,y:"40",textAnchor:"start",className:"train-name",children:e[c].move.name}),(0,s.jsx)("rect",{x:o,y:"0",width:326*a+o,height:"24",className:"tooltipTrigger",onClick:function(){return t(!1)}})]},c)):r=1,E(e[c])&&(o+=326*a);return n},B=function(e){return(0,s.jsxs)("svg",{width:"335",height:"40",viewBox:"0 0 335 40",children:[(0,s.jsx)("g",{children:1===e.connection.transports.length?E(e.connection.transports[0])?(0,s.jsxs)("g",{className:"part train-class-"+e.connection.transports[0].move.clasz+" acc-0",children:[(0,s.jsx)("line",{x1:"0",y1:"12",x2:"326",y2:"12",className:"train-line"}),(0,s.jsx)("circle",{cx:"4",cy:"12",r:"12",className:"train-circle"}),(0,s.jsx)("use",{xlinkHref:O(e.connection.transports[0].move.clasz),className:"train-icon",x:"-4",y:"4",width:"16",height:"16"}),(0,s.jsx)("text",{x:"-6",y:"40",textAnchor:"start",className:"train-name",children:e.connection.transports[0].move.name}),(0,s.jsx)("rect",{x:"0",y:"0",width:"323",height:"24",className:"tooltipTrigger"})]}):(0,s.jsxs)("g",{className:"part train-class-walk acc-0",children:[(0,s.jsx)("line",{x1:"0",y1:"12",x2:"326",y2:"12",className:"train-line"}),(0,s.jsx)("circle",{cx:"4",cy:"12",r:"12",className:"train-circle"}),(0,s.jsx)("use",{xlinkHref:"#walk",className:"train-icon",x:"-4",y:"4",width:"16",height:"16"}),(0,s.jsx)("text",{x:"0",y:"40",textAnchor:"start",className:"train-name"}),(0,s.jsx)("rect",{x:"0",y:"0",width:"323",height:"24",className:"tooltipTrigger"})]}):L(e.connection.transports,e.setDetailViewHidden)}),(0,s.jsx)("g",{className:"destination",children:(0,s.jsx)("circle",{cx:"329",cy:"12",r:"6"})})]})};function Y(e,t,n,s,a,i,r){try{var o=e[i](r),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(s,a)}var V,W=function(e){return"Transport"===e.move_type},U=function(e,t){var n=c().unix(t).diff(c().unix(e),"minutes"),s=Math.floor(n/60),a=n%60;return s>0?s+"h "+a+"min":a+"min"},Z=function(e){for(var t=[],n=1;n<e.length-1;n++)t.push((0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border bg"}),(0,s.jsx)("div",{className:"timeline train-color-border progress",style:{height:"100%"}}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(e[n].arrival.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:(0,s.jsx)("span",{children:e[n].station.name})})]},n));return t},K=(V=F().mark((function e(t,n,s){var a,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=t.transports.map((function(e){if("Walk"===e.move_type)return fetch("https://europe.motis-project.de/?elm=FootRoutingRequest",(s=t.stops[e.move.range.from].station.pos.lat,i=t.stops[e.move.range.from].station.pos.lng,r=t.stops[e.move.range.to].station.pos.lat,o=t.stops[e.move.range.to].station.pos.lng,c=60*n.walk.search_profile.max_duration,l=n.walk.search_profile.profile,d=!1,u=!0,m=!0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({destination:{type:"Module",target:"/ppr/route"},content_type:"FootRoutingRequest",content:{start:{lat:s,lng:i},destinations:[{lat:r,lng:o}],search_options:{duration_limit:c,profile:l},include_edges:d,include_path:u,include_steps:m}})})).then((function(e){return e.json()})).then((function(e){console.log("Foot Request successful"),console.log(e),a.push(e.content.routes[0].routes[0].duration)}));var s,i,r,o,c,l,d,u,m})),Promise.all(i).then((function(e){s(a),console.log("Promise.all"),console.log(a)}));case 3:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,s){var a=V.apply(e,t);function i(e){Y(a,n,s,i,r,"next",e)}function r(e){Y(a,n,s,i,r,"throw",e)}i(void 0)}))}),q=function(e){return e.move.range.to-e.move.range.from-1},J=function(e){var t=(0,a.useState)(!0),n=t[0],i=t[1],r=(0,a.useState)(v("motis.routing.from_location")),o=r[0],l=(r[1],(0,a.useState)(v("motis.routing.to_location"))),d=l[0],u=(l[1],(0,a.useState)(v("motis.routing.from_modes"))),m=u[0],h=(u[1],(0,a.useState)([])),p=h[0],x=h[1];console.log(e.detailViewHidden),(0,a.useEffect)((function(){e.connection.transports.length!==e.connection.trips.length&&K(e.connection,m,x)}),[e.connection]);var f=e.connection.transports[0].move.range.to-e.connection.transports[0].move.range.from;return(0,s.jsx)(s.Fragment,{children:1===e.connection.transports.length?"Walk"!==e.connection.transports[0].move_type?(0,s.jsxs)("div",{className:"train-detail train-class-"+e.connection.transports[0].move.clasz,children:[(0,s.jsx)("div",{className:"top-border"}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"train-box train-class-"+e.connection.transports[0].move.clasz+" with-tooltip","data-tooltip":e.translation.connections.provider+": "+e.connection.transports[0].move.provider+"\n"+e.translation.connections.trainNr+": "+e.connection.trips[0].id.train_nr,onClick:function(){e.setSubOverlayHidden(!1),e.setTrainSelected(e.connection.trips[0].id)},children:[(0,s.jsx)("svg",{className:"train-icon",children:(0,s.jsx)("use",{xlinkHref:O(e.connection.transports[0].move.clasz)})}),(0,s.jsx)("span",{className:"train-name",children:e.connection.transports[0].move.name})]})}),(0,s.jsx)("div",{className:"first-stop",children:(0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(e.connection.stops[0].departure.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:(0,s.jsx)("span",{children:e.connection.stops[0].station.name})})]})}),(0,s.jsxs)("div",{className:"direction past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("i",{className:"icon",children:"arrow_forward"}),e.connection.transports[0].move.direction]}),(0,s.jsxs)("div",{className:1===f?"intermediate-stops-toggle past":"intermediate-stops-toggle clickable past",onClick:function(){return i(!n)},children:[(0,s.jsxs)("div",{className:"timeline-container",children:[(0,s.jsx)("div",{className:"timeline train-color-border bg"}),(0,s.jsx)("div",{className:"timeline train-color-border progress",style:{height:"100%"}})]}),1===f?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"expand-icon",children:[(0,s.jsx)("i",{className:"icon",children:"expand_less"}),(0,s.jsx)("i",{className:"icon",children:"expand_more"})]}),(0,s.jsx)("span",{children:e.translation.connections.tripIntermediateStops(f-1)+" ("+U(e.connection.stops[0].departure.time,e.connection.stops[e.connection.stops.length-1].arrival.time)+")"})]}),(0,s.jsx)("div",{className:n?"intermediate-stops collapsed":"intermediate-stops expanded",children:Z(e.connection.stops)}),(0,s.jsx)("div",{className:"last-stop",children:(0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(e.connection.stops[e.connection.stops.length-1].arrival.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:(0,s.jsx)("span",{children:e.connection.stops[e.connection.stops.length-1].station.name})})]})})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"train-detail train-class-walk initial-walk",children:[(0,s.jsx)("div",{className:"top-border"}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"train-box train-class-walk",children:(0,s.jsx)("svg",{className:"train-icon",children:(0,s.jsx)("use",{xlinkHref:"#walk"})})})}),(0,s.jsx)("div",{className:"first-stop",children:(0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(e.connection.stops[0].departure.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:(0,s.jsx)("span",{className:"virtual",children:o.name})})]})}),(0,s.jsxs)("div",{className:"intermediate-stops-toggle",children:[(0,s.jsxs)("div",{className:"timeline-container",children:[(0,s.jsx)("div",{className:"timeline train-color-border bg"}),(0,s.jsx)("div",{className:"timeline train-color-border progress",style:{height:"100%"}})]}),(0,s.jsx)("div",{className:"expand-icon"}),(0,s.jsx)("span",{children:e.translation.connections.tripWalk(U(e.connection.stops[0].departure.time,e.connection.stops[1].arrival.time))})]}),(0,s.jsx)("div",{className:"last-stop",children:(0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(e.connection.stops[e.connection.stops.length-1].arrival.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:(0,s.jsx)("span",{className:"virtual",children:d.name})})]})})]})}):(0,s.jsx)(G,{connection:e.connection,isCollapsed:n,collapseSetter:i,setSubOverlayHidden:e.setSubOverlayHidden,setTrainSelected:e.setTrainSelected,walkTimes:p,translation:e.translation})})},G=function(e){var t=(0,a.useState)([]),n=t[0],i=t[1];return(0,a.useEffect)((function(){var t=[],n=!1,s=0;e.connection.transports.map((function(a,i){W(a)&&n?(t.push({hasWalk:!0,walkTime:e.walkTimes[s],transport:a,stops:e.connection.stops,trip:e.connection.trips[i-s]}),n=!1,s+=1):W(a)?t.push({hasWalk:!1,walkTime:0,transport:a,stops:e.connection.stops,trip:e.connection.trips[i-s]}):n=!0})),i(t)}),[e.walkTimes]),console.log("WalkTimes"),console.log(e.walkTimes),(0,s.jsx)(s.Fragment,{children:0===e.walkTimes.length?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(s.Fragment,{children:n.map((function(t,n){return(0,s.jsxs)("div",{className:"train-detail train-class-"+t.transport.move.clasz,children:[(0,s.jsx)("div",{className:"top-border"}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"train-box train-class-"+t.transport.move.clasz+" with-tooltip","data-tooltip":e.translation.connections.provider+": "+t.transport.move.provider+"\n"+e.translation.connections.trainNr+": "+e.connection.trips[0].id.train_nr,onClick:function(){e.setSubOverlayHidden(!1),e.setTrainSelected(t.trip.id)},children:[(0,s.jsx)("svg",{className:"train-icon",onClick:function(){e.setSubOverlayHidden(!1),e.setTrainSelected(t.trip.id)},children:(0,s.jsx)("use",{xlinkHref:O(t.transport.move.clasz)})}),(0,s.jsx)("span",{className:"train-name",children:t.transport.move.name})]})}),0===n?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("div",{className:"train-top-line",children:(0,s.jsx)("span",{children:t.hasWalk?t.walkTime+"min Fu\xdfweg":U(t.stops[t.transport.move.range.from].arrival.time,t.stops[t.transport.move.range.from].departure.time)+" Umstieg"})}),(0,s.jsx)("div",{className:"first-stop",children:(0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(t.stops[t.transport.move.range.from].departure.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:t.stops[t.transport.move.range.from].station.name})]})}),(0,s.jsxs)("div",{className:"intermediate-stops-toggle clickable past",onClick:function(){return e.collapseSetter(!e.isCollapsed)},children:[(0,s.jsxs)("div",{className:"timeline-container",children:[(0,s.jsx)("div",{className:"timeline train-color-border bg"}),(0,s.jsx)("div",{className:"timeline train-color-border progress",style:{height:"100%"}})]}),(0,s.jsxs)("div",{className:"expand-icon",children:[(0,s.jsx)("i",{className:"icon",children:"expand_less"}),(0,s.jsx)("i",{className:"icon",children:"expand_more"})]}),(0,s.jsx)("span",{children:e.translation.connections.tripIntermediateStops(q(t.transport))+" ("+U(e.connection.stops[t.transport.move.range.from].departure.time,e.connection.stops[t.transport.move.range.to].arrival.time)+")"})]}),(0,s.jsx)("div",{className:e.isCollapsed?"intermediate-stops collapsed":"intermediate-stops expanded",children:Z(t.stops)}),(0,s.jsx)("div",{className:"last-stop",children:(0,s.jsxs)("div",{className:"stop past",children:[(0,s.jsx)("div",{className:"timeline train-color-border"}),(0,s.jsx)("div",{className:"time",children:(0,s.jsx)("span",{className:"past",children:c().unix(t.stops[t.transport.move.range.to].arrival.time).format("HH:mm")})}),(0,s.jsx)("div",{className:"delay"}),(0,s.jsx)("div",{className:"station",children:(0,s.jsx)("span",{className:"virtual",children:t.stops[t.transport.move.range.to].station.name})})]})})]},n)}))})})},X=function(e){var t=(0,a.useState)(e.trainSelected.line_id),n=t[0],i=(t[1],(0,a.useState)(e.trainSelected.station_id)),r=i[0],o=(i[1],(0,a.useState)(e.trainSelected.target_station_id)),l=o[0],d=(o[1],(0,a.useState)(e.trainSelected.target_time)),u=d[0],m=(d[1],(0,a.useState)(e.trainSelected.time)),h=m[0],p=(m[1],(0,a.useState)(e.trainSelected)),x=p[0],v=(p[1],(0,a.useState)()),f=v[0],j=v[1];return(0,a.useEffect)((function(){if(void 0!==e.trainSelected){fetch("https://europe.motis-project.de/?elm=tripRequest",function(e,t,n,s,a,i){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({destination:{type:"Module",target:"/trip_to_connection"},content_type:"TripId",content:{line_id:e,station_id:t,target_station_id:n,target_time:s,time:a,train_nr:i}})}}(n,r,l,u,h,x.train_nr)).then((function(e){return e.json()})).then((function(e){console.log("Trip Request successful"),console.log(e),j(e.content)}))}}),[e.subOverlayHidden]),void 0===f?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"connection-details trip-view",children:[(0,s.jsx)("div",{className:"connection-info",children:(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("div",{className:"back",children:(0,s.jsx)("i",{className:"icon",onClick:function(){return e.setSubOverlayHidden(!0)},children:"arrow_back"})}),(0,s.jsxs)("div",{className:"details",children:[(0,s.jsx)("div",{className:"date",children:c().unix(e.displayDate.unix()).format(e.translation.dateFormat)}),(0,s.jsxs)("div",{className:"connection-times",children:[(0,s.jsxs)("div",{className:"times",children:[(0,s.jsx)("div",{className:"connection-departure",children:c().unix(h).format("HH:mm")}),(0,s.jsx)("div",{className:"connection-arrival",children:c().unix(u).format("HH:mm")})]}),(0,s.jsxs)("div",{className:"locations",children:[(0,s.jsx)("div",{children:f.stops[0].station.name}),(0,s.jsx)("div",{children:f.stops[f.stops.length-1].station.name})]})]}),(0,s.jsxs)("div",{className:"summary",children:[(0,s.jsxs)("span",{className:"duration",children:[(0,s.jsx)("i",{className:"icon",children:"schedule"}),U(h,u)]}),(0,s.jsxs)("span",{className:"interchanges",children:[(0,s.jsx)("i",{className:"icon",children:"transfer_within_a_station"}),e.translation.connections.interchanges(0)]})]})]}),(0,s.jsx)("div",{className:"actions"})]})}),(0,s.jsx)("div",{className:"connection-journey",id:"sub-connection-journey",children:(0,s.jsx)(J,{connection:f,setSubOverlayHidden:e.setSubOverlayHidden,setTrainSelected:e.setTrainSelected,detailViewHidden:e.detailViewHidden,translation:e.translation})})]})};function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $=function(e){var t=Q(a.useState(c()()),2),n=t[0],i=t[1];return(0,s.jsxs)("div",{className:e.subOverlayHidden?"sub-overlay hidden":"sub-overlay",children:[(0,s.jsx)("div",{id:"sub-overlay-content",children:void 0===e.trainSelected?(0,s.jsxs)("div",{className:"trip-search",children:[(0,s.jsx)("div",{className:"header",children:(0,s.jsxs)("div",{id:"trip-search-form",children:[(0,s.jsx)("div",{className:"pure-g gutters",children:(0,s.jsx)("div",{className:"pure-u-1 pure-u-sm-1-2 train-nr",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.trainNr}),(0,s.jsxs)("div",{className:"gb-input-group",children:[(0,s.jsx)("div",{className:"gb-input-icon",children:(0,s.jsx)("i",{className:"icon",children:"train"})}),(0,s.jsx)("input",{className:"gb-input",tabIndex:1,type:"number",pattern:"[0-9]+",id:"trip-search-trainnr-input"})]})]})})}),(0,s.jsxs)("div",{className:"pure-g gutters",children:[(0,s.jsx)("div",{className:"pure-u-1 pure-u-sm-12-24 to-location",children:(0,s.jsx)("div",{children:(0,s.jsx)(p,{translation:e.translation,currentDate:n,setCurrentDate:i,scheduleInfo:e.scheduleInfo})})}),(0,s.jsx)("div",{className:"pure-u-1 pure-u-sm-12-24",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"label",children:e.translation.search.time}),(0,s.jsxs)("div",{className:"gb-input-group",children:[(0,s.jsx)("div",{className:"gb-input-icon",children:(0,s.jsx)("i",{className:"icon",children:"schedule"})}),(0,s.jsx)("input",{className:"gb-input",tabIndex:4}),(0,s.jsx)("div",{className:"gb-input-widget",children:(0,s.jsxs)("div",{className:"hour-buttons",children:[(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",children:(0,s.jsx)("i",{className:"icon",children:"chevron_left"})})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",children:(0,s.jsx)("i",{className:"icon",children:"chevron_right"})})})]})})]})]})})]})]})}),(0,s.jsx)("div",{className:"trips"})]}):(0,s.jsx)(X,{subOverlayHidden:e.subOverlayHidden,setSubOverlayHidden:e.setSubOverlayHidden,trainSelected:e.trainSelected,setTrainSelected:e.setTrainSelected,detailViewHidden:e.detailViewHidden,translation:e.translation,displayDate:e.displayDate})}),(0,s.jsx)("div",{className:"sub-overlay-close",onClick:function(){return e.setSubOverlayHidden(!0)},children:(0,s.jsx)("i",{className:"icon",children:"close"})})]})},ee=function(){return(0,s.jsxs)("div",{className:"spinner",children:[(0,s.jsx)("div",{className:"bounce1"}),(0,s.jsx)("div",{className:"bounce2"}),(0,s.jsx)("div",{className:"bounce3"})]})},te=function(e,t){for(var n=0,s=0;s<e.length;s++)"Transport"===e[s].move_type&&s>0&&n++;return t.connections.interchanges(n)},ne=function(e){var t=(0,a.useState)(null),n=t[0],i=t[1],r=(0,a.useState)(!0),o=r[0],l=r[1],d=(0,a.useState)(!0),u=d[0],m=d[1],h=(0,a.useState)(null),p=h[0],x=h[1],f=(0,a.useState)(!1),j=f[0],g=f[1],N=(0,a.useState)(!1),b=N[0],y=N[1],S=(0,a.useState)(!0),w=S[0],k=S[1],C=(0,a.useState)(0),_=C[0],z=C[1],T=(0,a.useState)(void 0),H=T[0],D=T[1],M=(0,a.useState)(v("motis.routing.from_location")),A=M[0],P=(M[1],(0,a.useState)(v("motis.routing.to_location"))),I=P[0];P[1];return a.useEffect((function(){if(null!==e.scheduleInfo){var t=c()(),n=c().unix(e.scheduleInfo.begin);n.hour(t.hour()),n.minute(t.minute()),i(n)}}),[e.scheduleInfo]),(0,s.jsxs)("div",{className:o?"overlay-container":"overlay-container hidden",children:[(0,s.jsxs)("div",{className:"overlay",children:[(0,s.jsx)("div",{id:"overlay-content",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R,{setConnections:x,translation:e.translation,extendForwardFlag:j,extendBackwardFlag:b,displayDate:n,setDisplayDate:i,scheduleInfo:e.scheduleInfo,setExtendForwardFlag:g,setExtendBackwardFlag:y}),p?(0,s.jsx)("div",{id:"connections",children:(0,s.jsxs)("div",{className:"connections",children:[(0,s.jsx)("div",{className:"extend-search-interval search-before",onClick:function(){return y(!0)},children:b?(0,s.jsx)(ee,{}):(0,s.jsx)("a",{children:e.translation.connections.extendBefore})}),(0,s.jsxs)("div",{className:"connection-list",children:[p.map((function(e,t){return e.dummyDay?(0,s.jsx)("div",{className:"date-header divider",children:(0,s.jsx)("span",{children:e.dummyDay})},t):(0,s.jsx)("div",{className:"connection",onClick:function(){k(!1),z(t)},children:(0,s.jsxs)("div",{className:"pure-g",children:[(0,s.jsxs)("div",{className:"pure-u-4-24 connection-times",children:[(0,s.jsx)("div",{className:"connection-departure",children:c().unix(e.stops[0].departure.time).format("HH:mm")}),(0,s.jsx)("div",{className:"connection-arrival",children:c().unix(e.stops[e.stops.length-1].arrival.time).format("HH:mm")})]}),(0,s.jsx)("div",{className:"pure-u-4-24 connection-duration",children:U(e.stops[0].departure.time,e.stops[e.stops.length-1].arrival.time)}),(0,s.jsx)("div",{className:"pure-u-16-24 connection-trains",children:(0,s.jsxs)("div",{className:"transport-graph",children:[(0,s.jsx)(B,{connection:e,setDetailViewHidden:k}),(0,s.jsxs)("div",{className:"tooltip",style:{position:"absolute",left:"0px",top:"23px"},children:[(0,s.jsxs)("div",{className:"stations",children:[(0,s.jsxs)("div",{className:"departure",children:[(0,s.jsx)("span",{className:"station",children:e.stops[e.transports[0].move.range.from].station.name}),(0,s.jsx)("span",{className:"time",children:c().unix(e.stops[e.transports[0].move.range.from].departure.time).format("HH:mm")})]}),(0,s.jsxs)("div",{className:"arrival",children:[(0,s.jsx)("span",{className:"station",children:e.stops[e.transports[0].move.range.to].station.name}),(0,s.jsx)("span",{className:"time",children:c().unix(e.stops[e.transports[0].move.range.to].arrival.time).format("HH:mm")})]})]}),(0,s.jsx)("div",{className:"transport-name",children:(0,s.jsx)("span",{children:e.transports[0].move.name})})]})]})})]})},t)})),(0,s.jsx)("div",{className:"divider footer"}),(0,s.jsx)("div",{className:"extend-search-interval search-after",onClick:function(){return g(!0)},children:j?(0,s.jsx)(ee,{}):(0,s.jsx)("a",{children:e.translation.connections.extendAfter})})]})]})}):e.scheduleInfo&&n&&(n.unix()<e.scheduleInfo.begin||n.unix()>e.scheduleInfo.end)?(0,s.jsx)("div",{id:"connections",children:(0,s.jsxs)("div",{className:"main-error",children:[(0,s.jsx)("div",{className:"",children:e.translation.errors.journeyDateNotInSchedule}),(0,s.jsx)("div",{className:"schedule-range",children:e.translation.connections.scheduleRange(e.scheduleInfo.begin,e.scheduleInfo.end-86400)})]})}):(0,s.jsx)(ee,{})]}):(0,s.jsxs)("div",{className:"connection-details",children:[(0,s.jsx)("div",{className:"connection-info",children:(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("div",{className:"back",children:(0,s.jsx)("i",{className:"icon",onClick:function(){return k(!0)},children:"arrow_back"})}),(0,s.jsxs)("div",{className:"details",children:[(0,s.jsx)("div",{className:"date",children:n.format("D.M.YYYY")}),(0,s.jsxs)("div",{className:"connection-times",children:[(0,s.jsxs)("div",{className:"times",children:[(0,s.jsx)("div",{className:"connection-departure",children:c().unix(p[_].stops[0].departure.time).format("HH:mm")}),(0,s.jsx)("div",{className:"connection-arrival",children:c().unix(p[_].stops[p[_].stops.length-1].arrival.time).format("HH:mm")})]}),(0,s.jsxs)("div",{className:"locations",children:[(0,s.jsx)("div",{children:A.name}),(0,s.jsx)("div",{children:I.name})]})]}),(0,s.jsxs)("div",{className:"summary",children:[(0,s.jsxs)("span",{className:"duration",children:[(0,s.jsx)("i",{className:"icon",children:"schedule"}),U(p[_].stops[0].departure.time,p[_].stops[p[_].stops.length-1].arrival.time)]}),(0,s.jsxs)("span",{className:"interchanges",children:[(0,s.jsx)("i",{className:"icon",children:"transfer_within_a_station"}),te(p[_].transports,e.translation)]})]})]}),(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)("i",{className:"icon",children:"save"}),(0,s.jsx)("i",{className:"icon",children:"share"})]})]})}),(0,s.jsx)("div",{className:"connection-journey",id:"connection-journey",children:(0,s.jsx)(J,{connection:p[_],setSubOverlayHidden:m,setTrainSelected:D,detailViewHidden:w,translation:e.translation})})]})}),(0,s.jsx)($,{subOverlayHidden:u,setSubOverlayHidden:m,trainSelected:H,setTrainSelected:D,translation:e.translation,detailViewHidden:w,scheduleInfo:e.scheduleInfo,displayDate:n})]}),(0,s.jsxs)("div",{className:"overlay-tabs",children:[(0,s.jsx)("div",{className:"overlay-toggle",onClick:function(){return l(!o)},children:(0,s.jsx)("i",{className:"icon",children:"arrow_drop_down"})}),(0,s.jsx)("div",{className:u?"trip-search-toggle":"trip-search-toggle enabled",onClick:function(){m(!u),D(void 0)},children:(0,s.jsx)("i",{className:"icon",children:"train"})})]})]})},se=function(e){return c().unix(e).format("DD/MM/YYYY")},ae=function(e){return c().unix(e).format("DD.MM.YYYY")},ie={search:{search:"Suchen",start:"Start",destination:"Ziel",date:"Datum",weekDays:["Mo","Di","Mi","Do","Fr","Sa","So"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],time:"Uhrzeit",startTransports:"Verkehrsmittel am Start",destinationTransports:"Verkehrsmittel am Ziel",departure:"Abfahrt",arrival:"Ankunft",trainNr:"Zugnummer",maxDuration:"Maximale Dauer (Minuten)",searchProfile:{profile:"Profil",walkingSpeed:"Laufgeschwindigkeit (m/s)",stairsUp:"Treppen (aufw\xe4rts)",stairsDown:"Treppen (abw\xe4rts)",stairsWithHandrailUp:"Treppen mit Gel\xe4nder (aufw\xe4rts)",stairsWithHandrailDown:"Treppen mit Gel\xe4nder (abw\xe4rts)",timeCost:"Zeitaufwand",accessibilityCost:"Beschwerlichkeit",streetCrossings:"Stra\xdfen\xfcberquerungen",signals:"Ampeln",marked:"Zebrastreifen",island:"Verkehrsinseln",unmarked:"Unmarkiert",primary:"Primary",secondary:"Secondary",tertiary:"Tertiary",residential:"Residential",elevationUp:"H\xf6henunterschiede (aufw\xe4rts)",elevationDown:"H\xf6henunterschiede (abw\xe4rts)",roundAccessibility:"Rundung Beweglichkeit",elevators:"Aufz\xfcge",escalators:"Rolltreppen",movingWalkways:"Fahrsteige"},useParking:"Parkpl\xe4tze verwenden"},connections:{timeHeader:"Zeit",durationHeader:"Dauer",transportsHeader:"Verkehrsmittel",scheduleRange:function(e,t){return"Auskunft von "+ae(e)+" bis "+ae(t)+" m\xf6glich"},loading:"Verbindungen suchen...",noResults:"Keine Verbindungen gefunden",extendBefore:"Fr\xfcher",extendAfter:"Sp\xe4ter",interchanges:function(e){return 0==e?"Keine Umstiege":1==e?"1 Umstieg":e+"Umstiege"},walkDuration:function(e){return e+"Fu\xdfweg"},interchangeDuration:function(e){return e+"Umstieg"},arrivalTrack:function(e){return"Ankunft Gleis"+e},track:"Gleis",tripIntermediateStops:function(e){return 0==e?"Fahrt ohne Zwischenhalt":1==e?"Fahrt 1 Station":"Fahrt "+e+" Stationen"},tripWalk:function(e){return"Fu\xdfweg ("+e+")"},tripBike:function(e){return"Fahrrad ("+e+")"},tripCar:function(e){return"Auto ("+e+")"},provider:"Betreiber",walk:"Fu\xdfweg",bike:"Fahrrad",car:"Auto",trainNr:"Zugnummer",lineId:"Linie",parking:"Parkplatz"},station:{direction:"Richtung",noDepartures:"Keine Abfahrten im gew\xe4hlten Zeitraum",noArrivals:"Keine Ank\xfcnfte im gew\xe4hlten Zeitraum",loading:"Laden...",trackAbbr:"Gl."},railViz:{noTrains:"Keine Z\xfcge",delayColors:"Nach Versp\xe4tung",classColors:"Nach Kategorie",simActive:"Simulationsmodus aktiv"},mapContextMenu:{routeFromHere:"Routen von hier",routeToHere:"Routen hierher"},errors:{journeyDateNotInSchedule:"Zeitraum nicht im Fahrplan",internalError:function(e){return"Interner Fehler ("+e+")"},timeout:"Zeit\xfcberschreitung",network:"Netzwerkfehler",http:function(e){return"HTTP-Fehler "+e},decode:function(e){return"Ung\xfcltige Antwort ("+e+")"},moduleNotFound:"Modul nicht geladen",osrmProfileNotAvailable:"OSRM: Profil nicht verf\xfcgbar",osrmNoRoutingResponse:"OSRM: Keine Routing-Antwort",pprProfileNotAvailable:"PPR: Profil nicht verf\xfcgbar"},trips:{noResults:"Keine passenden Z\xfcge gefunden"},misc:{permalink:"Permalink"},simTime:{simMode:"Simulationsmodus"},searchProfiles:{default:"Standard",accessibility1:"Auch nach leichten Wegen suchen",wheelchair:"Rollstuhl",elevation:"Weniger Steigung",custom:"Benutzerdefiniert"},dateFormat:"D.M.YYYY"},re={search:{search:"Search",start:"Start",destination:"Destination",date:"Date",weekDays:["Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],time:"Time",startTransports:"Transports at the start",destinationTransports:"Transports at the destination",departure:"Departure",arrival:"Arrival",trainNr:"Train Number",maxDuration:"Max. duration (minutes)",searchProfile:{profile:"Profil",walkingSpeed:"Walking speed (m/s)",stairsUp:"Stairs (up)",stairsDown:"Stairs (down)",stairsWithHandrailUp:"Stairs with handrail (up)",stairsWithHandrailDown:"Stairs with handrail (down)",timeCost:"Time cost",accessibilityCost:"Accessibility cost",streetCrossings:"Street crossings",signals:"Traffic signals",marked:"Marked (zebra crossings)",island:"Traffic islands",unmarked:"Unmarked",primary:"Primary",secondary:"Secondary",tertiary:"Tertiary",residential:"Residential",elevationUp:"Elevation difference (up)",elevationDown:"Elevation difference (down)",roundAccessibility:"Round accessibility",elevators:"Elevators",escalators:"Escalators",movingWalkways:"Moving walkways"},useParking:"Use parkings"},connections:{timeHeader:"Time",durationHeader:"Duration",transportsHeader:"Transports",scheduleRange:function(e,t){return"Possible dates: "+se(e)+" - "+se(t)},loading:"Searching...",noResults:"No connections found",extendBefore:"Earlier",extendAfter:"Later",interchanges:function(e){return 0==e?"No interchanges":1==e?"1 Interchange":e+" interchanges"},walkDuration:function(e){return e+" walk"},interchangeDuration:function(e){return e+" interchange"},arrivalTrack:function(e){return"Arrival track "+e},track:"Track",tripIntermediateStops:function(e){return 0==e?"No intermediate stops":1==e?"1 intermediate stop":e+" intermediate stops"},tripWalk:function(e){return"Walk ("+e+")"},tripBike:function(e){return"Bike ("+e+")"},tripCar:function(e){return"Car ("+e+")"},provider:"Provider",walk:"Walk",bike:"Bike",car:"Car",trainNr:"Train number",lineId:"Line",parking:"Parking"},station:{direction:"Direction",noDepartures:"No departures",noArrivals:"No arrivals",loading:"Loading...",trackAbbr:"Tr."},railViz:{noTrains:"No trains",delayColors:"By delay",classColors:"By category",simActive:"Simulation mode active"},mapContextMenu:{routeFromHere:"Directions from here",routeToHere:"Directions to here"},errors:{journeyDateNotInSchedule:"Date not in schedule",internalError:function(e){return"Internal error ("+e+")"},timeout:"Timeout",network:"Network error",http:function(e){return"HTTP error "+e},decode:function(e){return"Invalid response ("+e+")"},moduleNotFound:"Module not found",osrmProfileNotAvailable:"OSRM: Profile not available",osrmNoRoutingResponse:"OSRM: No routing response",pprProfileNotAvailable:"PPR: Profile not available"},trips:{noResults:"No matching trains found"},misc:{permalink:"Permalink"},simTime:{simMode:"Simulation mode"},searchProfiles:{default:"Default",accessibility1:"Include accessible routes",wheelchair:"Wheelchair",elevation:"Avoid elevation changes",custom:"Custom"},dateFormat:"YYYY/M/D"},oe={search:{search:"Szukaj",start:"Pocz\u0105tek",destination:"Koniec",date:"Data",weekDays:["Pn","Wt","\u015ar","Cz","Pt","So","Nie"],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],time:"Godzina",startTransports:"\u015arodki transportu na pocz\u0105tku",destinationTransports:"\u015arodki transportu na ko\u0144cu",departure:"Odjazd",arrival:"Przyjazd",trainNr:"Numer kursu",maxDuration:"Max. czas trwania (w min.)",searchProfile:{profile:"Profil",walkingSpeed:"Pr\u0119dko\u015b\u0107 marszu (m/s)",stairsUp:"Schody (w g\xf3r\u0119)",stairsDown:"Schody (w d\xf3\u0142)",stairsWithHandrailUp:"Schody z por\u0119cz\u0105 (w g\xf3r\u0119)",stairsWithHandrailDown:"Schody z por\u0119cz\u0105 (w g\xf3\u0142)",timeCost:"Nak\u0142ad czasu",accessibilityCost:"uci\u0105\u017cliwo\u015b\u0107",streetCrossings:"przej\u015bcie przez ulic\u0119",signals:"lampy",marked:"Przej\u015bcie dla pieszych",island:"Wysepka",unmarked:"Nieoznaczone",primary:"Primary",secondary:"Secondary",tertiary:"Tertiary",residential:"Residential",elevationUp:"R\xf3\u017cnica wysoko\u015bci (w g\xf3r\u0119)",elevationDown:"R\xf3\u017cnice wysoko\u015bci (w d\xf3\u0142)",roundAccessibility:"Zdolno\u015b\u0107 do zaokr\u0105glania",elevators:"Windy",escalators:"Schody ruchome",movingWalkways:"Chodniki ruchome"},useParking:"Korzystaj z parking\xf3w"},connections:{timeHeader:"Czas",durationHeader:"Czas trwania",transportsHeader:"\u015brodki transportu",scheduleRange:function(e,t){return"Informacja od "+ae(e)+" do "+ae(t)+" mo\u017cliwa"},loading:"Szukam po\u0142\u0105cze\u0144...",noResults:"Nie znaleziono po\u0142\u0105cze\u0144",extendBefore:"Wcze\u015bniej",extendAfter:"P\xf3\u017aniej",interchanges:function(e){return 0==e?"Bez przesiadek":1==e?"1 przesiadka":e+" przesiadek"},walkDuration:function(e){return e+" Spacer"},interchangeDuration:function(e){return e+" przesiadka"},arrivalTrack:function(e){return"peron przyjazdu "+e},track:"Peron",tripIntermediateStops:function(e){return 0==e?"Podr\xf3\u017c bez zatrzymywania si\u0119":1==e?"Podr\xf3\u017c 1 przystanek":"Podr\xf3\u017c "+e+" przystank\xf3w"},tripWalk:function(e){return"Spacer ("+e+")"},tripBike:function(e){return"Rower ("+e+")"},tripCar:function(e){return"Samoch\xf3d ("+e+")"},provider:"Operator",walk:"Spacer",bike:"Rower",car:"Samoch\xf3d",trainNr:"Numer kursu",lineId:"Linia",parking:"Parking"},station:{direction:"Kierunek",noDepartures:"Brak odjazd\xf3w w wybranym okresie",noArrivals:"Brak przyjazd\xf3w w wybranym okresie",loading:"\u0141aduj\u0119...",trackAbbr:"Per."},railViz:{noTrains:"Brak kurs\xf3w",delayColors:"Wed\u0142ug op\xf3\u017anie\u0144",classColors:"Wed\u0142ug kategorii",simActive:"Tryb symulacji aktywny"},mapContextMenu:{routeFromHere:"Pocz\u0105tek podr\xf3\u017cy tutaj",routeToHere:"Koniec podr\xf3\u017cy tutaj"},errors:{journeyDateNotInSchedule:"Okres poza harmonogramem",internalError:function(e){return"B\u0142\u0105d wewn\u0119trzny ("+e+")"},timeout:"Przekroczono limit czasu",network:"B\u0142\u0105d sieci",http:function(e){return"B\u0142\u0105d HTTP "+e},decode:function(e){return"Nieprawid\u0142owa odpowied\u017a ("+e+")"},moduleNotFound:"Modu\u0142 nie za\u0142adowany",osrmProfileNotAvailable:"OSRM: Profil niedost\u0119pny",osrmNoRoutingResponse:"OSRM: brak odpowiedzi nawigacji",pprProfileNotAvailable:"PPR: Profil niedost\u0119pny"},trips:{noResults:"Nie znaleziono pasuj\u0105cych kurs\xf3w"},misc:{permalink:"Permalink"},simTime:{simMode:"Tryb symulacji"},searchProfiles:{default:"Domy\u015blny",accessibility1:"Poszukaj te\u017c \u0142atwej trasy",wheelchair:"w\xf3zek inwalidzki",elevation:"Mniej wzniesie\u0144",custom:"U\u017cytkownika"},dateFormat:"D.M.YYYY"};function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var le=function(e){var t=ce(a.useState({id:"",name:""}),2),n=t[0],i=t[1];return(0,s.jsx)("div",{id:"station-search",className:"",children:(0,s.jsx)(w,{translation:e.translation,label:e.translation.search.destination,station:n,setSearchDisplay:i,localStorageStation:"motis.routing.to_location"})})};function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ue=function(e){var t=de(a.useState(!1),2),n=t[0],i=t[1],r=de(a.useState(c()()),2),o=r[0],l=r[1];return(0,a.useEffect)((function(){window.portEvents.sub("mapInitFinished",(function(){window.portEvents.pub("mapSetLocale",e.translation.search)}))})),(0,s.jsxs)("div",{className:"map-container",children:[(0,s.jsx)("div",{id:"map-background",className:"mapboxgl-map"}),(0,s.jsx)("div",{id:"map-foreground",className:"mapboxgl-map"}),(0,s.jsx)("div",{className:"railviz-tooltip hidden"}),(0,s.jsxs)("div",{className:"map-bottom-overlay",children:[(0,s.jsxs)("div",{className:"sim-time-overlay",onClick:function(){return i(!n)},children:[(0,s.jsx)("div",{id:"railviz-loading-spinner",className:"",children:(0,s.jsxs)("div",{className:"spinner",children:[(0,s.jsx)("div",{className:"bounce1"}),(0,s.jsx)("div",{className:"bounce2"}),(0,s.jsx)("div",{className:"bounce3"})]})}),(0,s.jsx)("div",{className:"permalink",title:"Permalink",children:(0,s.jsx)("a",{href:"#/railviz/49.89335526028776/8.606607315730798/11/0/0/1603118821",children:(0,s.jsx)("i",{className:"icon",children:"link"})})}),(0,s.jsx)("div",{className:"sim-icon",title:"Simulationsmodus aktiv",children:(0,s.jsx)("i",{className:"icon",children:"warning"})}),(0,s.jsx)("div",{className:"time",id:"sim-time-overlay",children:"19.10.2020 16:47:01"})]}),(0,s.jsxs)("div",{className:"train-color-picker-overlay",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",id:"train-color-picker-none",name:"train-color-picker",onClick:function(){window.portEvents.pub("mapShowTrains",!1)}}),(0,s.jsx)("label",{htmlFor:"train-color-picker-none",children:e.translation.railViz.noTrains})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",id:"train-color-picker-className",name:"train-color-picker",defaultChecked:!0,onClick:function(){window.portEvents.pub("mapSetUseTrainClassColor",!0),window.portEvents.pub("mapShowTrains",!0)}}),(0,s.jsx)("label",{htmlFor:"train-color-picker-className",children:e.translation.railViz.classColors})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",id:"train-color-picker-delay",name:"train-color-picker",onClick:function(){window.portEvents.pub("mapSetUseTrainClassColor",!1),window.portEvents.pub("mapShowTrains",!0)}}),(0,s.jsx)("label",{htmlFor:"train-color-picker-delay",children:e.translation.railViz.delayColors})]})]})]}),(0,s.jsx)(z,{translation:e.translation}),(0,s.jsx)("div",{className:n?"sim-time-picker-container":"sim-time-picker-container hide",children:(0,s.jsxs)("div",{className:"sim-time-picker-overlay",children:[(0,s.jsxs)("div",{className:"title",children:[(0,s.jsx)("input",{type:"checkbox",id:"sim-mode-checkbox",name:"sim-mode-checkbox"}),(0,s.jsx)("label",{htmlFor:"sim-mode-checkbox",children:"Simulationsmodus"})]}),(0,s.jsx)("div",{className:"date",children:(0,s.jsx)(p,{translation:e.translation,currentDate:o,setCurrentDate:l,scheduleInfo:e.scheduleInfo})}),(0,s.jsxs)("div",{className:"time",children:[(0,s.jsx)("div",{className:"label",children:"Uhrzeit"}),(0,s.jsxs)("div",{className:"gb-input-group",children:[(0,s.jsx)("div",{className:"gb-input-icon",children:(0,s.jsx)("i",{className:"icon",children:"schedule"})}),(0,s.jsx)("input",{className:"gb-input",tabIndex:21}),(0,s.jsx)("div",{className:"gb-input-widget",children:(0,s.jsxs)("div",{className:"hour-buttons",children:[(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",children:(0,s.jsx)("i",{className:"icon",children:"chevron_left"})})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"gb-button gb-button-small gb-button-circle gb-button-outline gb-button-PRIMARY_COLOR disable-select",children:(0,s.jsx)("i",{className:"icon",children:"chevron_right"})})})]})})]})]}),(0,s.jsx)("div",{className:"close",children:(0,s.jsx)("i",{className:"icon",onClick:function(){return i(!1)},children:"close"})})]})})]})};function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var he=function(){var e=(0,r.useRouter)().query.lang;return"de"===e?ie:"pl"===e?oe:re},pe=function(){var e=me(a.useState(null),2),t=e[0],n=e[1],i=!1;return a.useEffect((function(){i=window.matchMedia("only screen and (max-width: 500px)").matches}),[]),a.useEffect((function(){fetch("https://europe.motis-project.de/?elm=requestScheduleInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:{},content_type:"MotisNoMessage",destination:{target:"/lookup/schedule_info",type:"Module"}})}).then((function(e){return e.json()})).then((function(e){console.log("Response came in"),console.log(e);var t={begin:e.content.begin,end:e.content.end},s=c().unix(t.begin);s.hour(c()().hour()),s.minute(c()().minute()),n(t)}))}),[]),(0,s.jsx)("div",{className:"app",children:i?(0,s.jsx)(ne,{translation:he(),scheduleInfo:t}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ue,{translation:he(),scheduleInfo:t}),(0,s.jsx)(ne,{translation:he(),scheduleInfo:t}),(0,s.jsx)(le,{translation:he()})]})})};function xe(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.default,{children:[(0,s.jsx)("title",{children:"MOTIS"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/ports.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/main.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"external_lib/mapbox-gl.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"external_lib/gl-matrix-min.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"external_lib/deep-equal.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"external_lib/polyline.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/webgl.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/trains.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/model.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/render.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/textures.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/api.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/markers.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/connectionmgr.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/path_base.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/path_connections.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/path_detail.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/path_extra.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/style.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/railviz/main.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/map_style.js"}),(0,s.jsx)("script",{type:"text/javascript",src:"js/map.js"}),(0,s.jsx)("link",{href:"fonts/styles.css",rel:"stylesheet"})]}),(0,s.jsx)("div",{id:"app-container",children:(0,s.jsx)(pe,{})}),(0,s.jsxs)("svg",{style:{display:"none"},children:[(0,s.jsx)("symbol",{id:"train",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M4,15.5C4,17.43 5.57,19 7.5,19L6,20.5v0.5h12v-0.5L16.5,19c1.93,0 3.5,-1.57 3.5,-3.5L20,5c0,-3.5 -3.58,-4 -8,-4s-8,0.5 -8,4v10.5zM12,17c-1.1,0 -2,-0.9 -2,-2s0.9,-2 2,-2 2,0.9 2,2 -0.9,2 -2,2zM18,10L6,10L6,5h12v5z"})}),(0,s.jsx)("symbol",{id:"sbahn",viewBox:"0 0 64 64",children:(0,s.jsx)("path",{d:"M 23.9104,17.8176 c 0,-2.7648 2.5344,-5.1456 7.0144,-5.1456 7.8592,0 14.5408,4.224 19.0208,9.0368 l 0,-8.3968 C 44.8,9.3184 38.2976,6.9376 31.0784,6.9376 c -8.6784,0 -18.3296,5.3248 -18.3296,15.232 0,18.8672 28.6208,12.1088 28.6208,23.0144 0,2.9184 -3.7888,5.632 -8.576,5.632 -7.7312,0 -15.4368,-4.7104 -19.6608,-10.7776 l 0,10.0864 c 4.48,3.9936 12.6208,7.168 19.6608,7.168 12.672,0 20.1984,-9.0368 20.1984,-16.768 0,-19.2512 -29.0816,-11.008 -29.0816,-22.7072 z"})}),(0,s.jsx)("symbol",{id:"ubahn",viewBox:"0 0 500 500",children:(0,s.jsx)("path",{d:"M269.02771 462.03556C301.49095 458.86693 331.81940 448.53888 355.90324 432.45098C368.00616 424.36627 385.07594 407.62587 392.49694 396.56338C403.34218 380.39638 411.21817 360.97199 415.43165 340C417.06374 331.87653 417.26314 317.60376 417.59707 185L417.96486 38.947368L317.89474 38.947368L317.89474 172.67306C317.89474 260.58200 317.50921 309.85624 316.76948 316.49013C315.44428 328.37460 311.53547 342.57976 307.56662 349.93462C302.58644 359.16362 293.39802 367.94547 283.81131 372.63882C257.43623 385.55122 218.84256 380.90205 200.54920 362.60869C191.23263 353.29213 184.83222 338.29015 182.14617 319.47368C181.48964 314.87452 181.08649 260.77515 181.07348 175.52632L181.05263 38.947368L82.105263 38.947368L82.105263 177.25689C82.105263 316.01926 82.371267 327.73304 85.920452 345.26316C94.686023 388.55802 121.69624 423.01667 163.04724 443.65869C193.35569 458.78839 232.59204 465.59192 269.02771 462.03556Z"})}),(0,s.jsx)("symbol",{id:"tram",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17,18C16.4,18 16,17.6 16,17C16,16.4 16.4,16 17,16C17.6,16 18,16.4 18,17C18,17.6 17.6,18 17,18M6.7,10.7L7,7.3C7,6.6 7.6,6 8.3,6H15.6C16.4,6 17,6.6 17,7.3L17.3,10.6C17.3,11.3 16.7,11.9 16,11.9H8C7.3,12 6.7,11.4 6.7,10.7M7,18C6.4,18 6,17.6 6,17C6,16.4 6.4,16 7,16C7.6,16 8,16.4 8,17C8,17.6 7.6,18 7,18M19,6A2,2 0 0,0 17,4H15A2,2 0 0,0 13,2H11A2,2 0 0,0 9,4H7A2,2 0 0,0 5,6L4,18A2,2 0 0,0 6,20H8L7,22H17.1L16.1,20H18A2,2 0 0,0 20,18L19,6Z"})}),(0,s.jsx)("symbol",{id:"bus",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M4,16c0,0.88 0.39,1.67 1,2.22L5,20c0,0.55 0.45,1 1,1h1c0.55,0 1,-0.45 1,-1v-1h8v1c0,0.55 0.45,1 1,1h1c0.55,0 1,-0.45 1,-1v-1.78c0.61,-0.55 1,-1.34 1,-2.22L20,6c0,-3.5 -3.58,-4 -8,-4s-8,0.5 -8,4v10zM7.5,17c-0.83,0 -1.5,-0.67 -1.5,-1.5S6.67,14 7.5,14s1.5,0.67 1.5,1.5S8.33,17 7.5,17zM16.5,17c-0.83,0 -1.5,-0.67 -1.5,-1.5s0.67,-1.5 1.5,-1.5 1.5,0.67 1.5,1.5 -0.67,1.5 -1.5,1.5zM18,11L6,11L6,6h12v5z"})}),(0,s.jsx)("symbol",{id:"walk",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"})}),(0,s.jsxs)("symbol",{id:"bike",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{d:"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"})]}),(0,s.jsxs)("symbol",{id:"car",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"}),(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}),(0,s.jsxs)("symbol",{id:"ship",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{d:"M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z"})]}),(0,s.jsxs)("symbol",{id:"plane",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"})]})]})]})}},4654:function(){}},function(e){e.O(0,[885,375,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);